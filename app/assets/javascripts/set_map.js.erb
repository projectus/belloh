function setMap() {
  var lat=document.getElementById("post_latitude").value;
  var lng=document.getElementById("post_longitude").value;
  var srcString = null;

  if (lat && lng) {
	  var latlng = lat+","+lng;
	  srcString = "http://maps.googleapis.com/maps/api/staticmap?center="
	            +latlng+"&zoom=12&size=210x210&sensor=false&markers=|"+latlng;
  } 
  else {
	  srcString = "<%= asset_path 'tiles/rot-globe.gif' %>";
  }
  mapSwap(srcString);
}

function mapSwap(srcString) {
	$('#map').fadeOut(500,function(){
		$(this).attr('src',srcString).attr('onload','$(this).fadeIn(500)');
	});
}