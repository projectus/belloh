<%= form_for(@post) do |f| %>
  <%= render 'errors' %>

	<div class="row-fluid">
	  <div class="span5">
		  <%= f.label :sender_desc %>
      <%= f.text_field :sender_desc %>
    </div>
    <div class="span2">
	    @
	  </div>
    <div class="span5">
		  <%= f.label :receiver_desc %>
      <%= f.text_field :receiver_desc %>
    </div>
  </div>
	<div class="row-fluid">
		<div class="span2"></div>
		<div class="span8">
		  <%= f.label :content %>
      <%= f.text_area :content, class: 'input-xxlarge' %>
    </div>
  </div>
  <div>
    <%= f.submit 'Post' %>
  </div>
  <div>
    <%= hidden_field_tag "post[longitude]" %>
    <%= hidden_field_tag "post[latitude]" %>
  </div>
<% end %>

<script>
  $(function(){
    getLocation();
  });

	function setPosition(position) {
		var lon=document.getElementById("post_longitude");
		var lat=document.getElementById("post_latitude");			
    lat.value=position.coords.latitude; 
		lon.value=position.coords.longitude;
	}
  var x=document.getElementById("geo");
	
	function getLocation() {
	  if (navigator.geolocation) {
		  navigator.geolocation.getCurrentPosition(setPosition);
		}
		else {
			x.innerHTML="Geolocation is not supported by this browser.";
		}
	}
</script>

